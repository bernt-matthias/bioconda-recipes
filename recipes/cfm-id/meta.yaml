{% set CONDA_BOOST = "1.66" %}
package:
  name: cfm-id
  version: "33"

source:
  #TODO needs to be moved to cargo port since snapshots are removed by sourceforge
  url: https://sourceforge.net/code-snapshots/svn/c/cf/cfm-id/code/cfm-id-code-r33-cfm.zip
  md5: 03e96e5676b1e7010ceb3f0b3d2f2ca4 
  patches:
    # allow disabling build of bundled tools
    - CMakeLists.patch

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake
  host:
    - boost
    - lp_solve
    - rdkit ==2018.09.1
  run:
    - boost
    - lp_solve
    - rdkit ==2018.09.1

# files taken from https://sourceforge.net/p/cfm-id/code/HEAD/tree/supplementary_material/cfm-train_example/train_example/
test:
  source_files:
    - example_candidates.txt
    - example_spec.txt
  files:
    - param_output.log
    - param_config.txt
  commands:
#     - cfm-id --help
    - cfm-id example_spec.txt AN_ID example_candidates.txt 5 10.0 0.01 0.001 param_output.log param_config.txt DotProduct
about:
  home: https://sourceforge.net/p/cfm-id/wiki/Home/
  license: GPLv3
  summary: 'Tools for applying Competitive Fragmentation Modeling (CFM) to spectrum prediction and metabolite identification tasks, as well as a tools for fragment generation and peak annotation.'
  license_file: license.txt
  license_family: GPL-2

