{% set CONDA_BOOST = "1.66" %}
package:
  name: cfm-id
  version: "33"

source:
  fn: cfm-id-code-r33-cfm.zip
  url: https://sourceforge.net/code-snapshots/svn/c/cf/cfm-id/code/cfm-id-code-r33-cfm.zip
  md5: a3cdbf322f94788f3105f26e73073b7d
  patches:
    # allow disabling build of bundled tools
    - CMakeLists.patch

build:
  number: 0
  skip: True # [osx]

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake
  host:
    - boost ==1.68.0
    - lp_solve
#     - rdkit ==2015.09.2
#     - rdkit ==Release_2017_09
    - rdkit ==2018.09.1
  run:
    - libgcc  # [not osx]
    - boost ==1.68.0
    - lp_solve
#     - rdkit ==2015.09.2
#     - rdkit ==Release_2017_09
    - rdkit ==2018.09.1
test:
  commands:
    - cfm-id --help

about:
  home: https://sourceforge.net/p/cfm-id/wiki/Home/
  license: GPLv3
  summary: 'CFM-ID provides a method for accurately and efficiently identifying metabolites in spectra generated by electrospray tandem mass spectrometry (ESI-MS/MS). The program uses Competitive Fragmentation Modeling to produce a probabilistic generative model for the MS/MS fragmentation process and machine learning techniques to adapt the model parameters from data.'
  license_family: GPL3

